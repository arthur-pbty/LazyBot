<!DOCTYPE html>
<html lang="fr">
<head>
  <title>LazyBot - Bot Discord Multifonction</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="LazyBot est un bot Discord puissant avec syst√®me de niveaux, √©conomie, messages personnalis√©s et bien plus encore.">
  <link rel="stylesheet" href="/index.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="/" class="navbar-brand">
        <img id="bot-avatar" src="" alt="LazyBot">
        <span>LazyBot</span>
      </a>
      <div class="navbar-nav">
        <a href="/" class="navbar-link">Accueil</a>
        <a href="/dashboard" class="navbar-link">Dashboard</a>
        <div id="auth-section">
          <a href="/auth/login" class="btn btn-primary btn-sm">Connexion</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <img id="hero-logo" class="hero-logo" src="" alt="LazyBot Logo">
      <h1 class="hero-title">LazyBot</h1>
      <p class="hero-subtitle">
        Un bot Discord complet avec syst√®me de niveaux, √©conomie, messages de bienvenue personnalis√©s, 
        r√¥les automatiques et un dashboard intuitif pour g√©rer votre serveur.
      </p>
      <div class="hero-buttons">
        <a id="invite-link" href="#" class="btn btn-primary btn-lg">
          ‚ûï Ajouter √† Discord
        </a>
        <a href="/dashboard" class="btn btn-secondary btn-lg">
          ‚öôÔ∏è Dashboard
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features">
    <div class="section-header">
      <h2>Fonctionnalit√©s</h2>
      <p>Tout ce dont vous avez besoin pour votre serveur Discord</p>
    </div>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">üìà</div>
        <h3>Syst√®me de Niveaux</h3>
        <p>R√©compensez l'activit√© de vos membres avec un syst√®me d'XP complet. Messages, vocal, courbes personnalisables et annonces automatiques.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üí∞</div>
        <h3>√âconomie</h3>
        <p>Un syst√®me √©conomique complet avec monnaie personnalisable, commandes daily, work, crime, steal, et transactions entre membres.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üëã</div>
        <h3>Messages Personnalis√©s</h3>
        <p>Accueillez les nouveaux membres et dites au revoir avec des messages enti√®rement personnalisables avec variables.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üé≠</div>
        <h3>R√¥les Automatiques</h3>
        <p>Attribuez automatiquement des r√¥les aux nouveaux membres ou aux utilisateurs en vocal. Configurez les salons √† exclure.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">‚öôÔ∏è</div>
        <h3>Dashboard Intuitif</h3>
        <p>Configurez tout depuis un dashboard web moderne et facile √† utiliser. Pas besoin de commandes compliqu√©es.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üõ°Ô∏è</div>
        <h3>Commandes Admin</h3>
        <p>G√©rez les niveaux et l'√©conomie de vos membres avec des commandes d'administration d√©di√©es.</p>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats">
    <div class="section-header">
      <h2>Statistiques</h2>
    </div>
    <div class="stats-grid">
      <div class="stat-item">
        <span id="stat-servers" class="stat-number">-</span>
        <span class="stat-label">Serveurs</span>
      </div>
      <div class="stat-item">
        <span id="stat-users" class="stat-number">-</span>
        <span class="stat-label">Utilisateurs</span>
      </div>
      <div class="stat-item">
        <span id="stat-commands" class="stat-number">20+</span>
        <span class="stat-label">Commandes</span>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta">
    <h2>Pr√™t √† am√©liorer votre serveur ?</h2>
    <p>Ajoutez LazyBot d√®s maintenant et d√©couvrez toutes ses fonctionnalit√©s.</p>
    <a id="invite-link-2" href="#" class="btn btn-primary btn-lg">
      Ajouter √† Discord
    </a>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-links">
        <a href="/dashboard">Dashboard</a>
        <a href="https://discord.com" target="_blank">Support</a>
      </div>
      <p class="footer-copyright">
        ¬© 2024 LazyBot. Fait avec ‚ù§Ô∏è pour Discord.
      </p>
    </div>
  </footer>

  <script>
    // Charger le lien d'invitation
    fetch("/invite-bot")
      .then(res => res.json())
      .then(data => {
        document.getElementById("invite-link").href = data.url;
        document.getElementById("invite-link-2").href = data.url;
      })
      .catch(() => console.log("Impossible de r√©cup√©rer le lien du bot."));

    // Charger les infos du bot (avatar)
    fetch("/api/bot-info")
      .then(res => res.json())
      .then(bot => {
        const avatarUrl = `https://cdn.discordapp.com/avatars/${bot.id}/${bot.avatar}.png`;
        document.getElementById("bot-avatar").src = avatarUrl;
        document.getElementById("hero-logo").src = avatarUrl;
        
        // Stats
        if (bot.guildCount) {
          document.getElementById("stat-servers").textContent = bot.guildCount;
        }
        if (bot.userCount) {
          document.getElementById("stat-users").textContent = bot.userCount;
        }
      })
      .catch(() => {
        // Utiliser un placeholder si pas d'info bot
        document.getElementById("bot-avatar").src = "https://cdn.discordapp.com/embed/avatars/0.png";
        document.getElementById("hero-logo").src = "https://cdn.discordapp.com/embed/avatars/0.png";
      });

    // V√©rifier si l'utilisateur est connect√©
    fetch("/api/user")
      .then(res => {
        if (!res.ok) throw new Error("Non connect√©");
        return res.json();
      })
      .then(user => {
        const authSection = document.getElementById("auth-section");
        authSection.innerHTML = `
          <div class="navbar-actions">
            <div class="navbar-user">
              <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="Avatar">
              <span>${user.username}</span>
            </div>
            <a href="/auth/logout" class="btn btn-secondary btn-sm">D√©connexion</a>
          </div>
        `;
      })
      .catch(() => {
        // Garder le bouton de connexion par d√©faut
      });
  </script>
</body>
</html>
